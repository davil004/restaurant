<!DOCTYPE html>
<html lang="en" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" type="text/css" href="../css/BackEnd.css" />

<!-- Bootstrap CSS  & FontAwsome-->
<base href="/">
<link href="css/bootstrap.css" rel="stylesheet">
<link href="font-awesome/css1/all.css" rel="stylesheet">
<link rel="icon" href="images/icon.png" />
<!-- Our Custom CSS -->
<link rel="stylesheet" href="css/style4.css">
<link rel="stylesheet" href="css/bootstrap-select.min.css">
<title>後台系統</title>

<script type="text/javascript">
	function clearForm() {
		var inputs = document.getElementsByTagName("input");
		for (var i = 0; i < inputs.length; i++) {
			if (inputs[i].type == "text") {
				inputs[i].value = "";
			}
		}
	}
</script>
</head>
<body>
	
	<div class="wrapper">
		<!-- Sidebar  -->
		
		<nav th:fragment="sidebar" id="sidebar">
			<div class="sidenav">
				<a class="logo" href="/manage/back.page" style="height:80px; font-size:30px;
		 margin-top:20px; margin-bottom:20px; padding-left:40px; border-bottom:1px solid;">後台系統</a>
		
				<li class="active"><a href="/manage/product.page">餐點管理</a></li>
				<li><a href="/manage/order.page">訂單管理</a></li>
				<button class="dropdown-btn">
					銷量分析 <i class="fa fa-caret-down"></i>
				</button>
				<div class="dropdown-container">
					<li><a href="/manage/sales.page">網路訂餐</a></li>
					<li><a href="/manage/delivery.page">外送訂餐</a></li>
				</div>
				<li><a href="/manage/Preferential.page">優惠管理</a></li>
			</div>
		</nav>

	
		<!-- Page Content  -->
		<div id="content">
			<nav th:fragment="sidebar"
				class="navbar navbar-expand-lg navbar-light"
				style="border-bottom: 4px solid #7386D5;">
				<div class="container-fluid">
					<div class="collapse navbar-collapse" id="navbarSupportedContent">
						<ul class="nav navbar-nav ml-auto">
							
							<li class="nav-item "><a class="nav-link btn btn-light mr-2" th:href="@{/manage/product.page}"
								>餐點管理</a></li>
							<li class="nav-item active"><a onclick=" handleListProduct(event);"
								class="nav-link btn btn-light mr-2" href="#">新增餐點</a></li>	
							<li class="nav-item "><a class="nav-link btn btn-light mr-2" 
							th:href="@{/pages/pcrud2.page}">餐點折扣</a></li>		
							
						</ul>
					</div>
				</div>
			</nav>
			<div class="line"></div>
			<div class="container" id="app">
				<!-- Default form subscription -->
				<div class="card">
					<div class="card-header">

						<div class="tab">
							<button class="tablinks" onclick="openTab(event, 'product')"
								id="defaultOpen">主菜</button>
							<button class="tablinks" onclick="openTab(event, 'product2')">義大利麵</button>
							<button class="tablinks" onclick="openTab(event, 'product3')">pizza</button>
							<button class="tablinks" onclick="openTab(event, 'product4')">沙拉/濃湯</button>
							<button class="tablinks" onclick="openTab(event, 'product5')">單點</button>
						</div>
					</div>
					<div class="card-body">

						<div id="product" class="tabcontent">
						   <h5 class="text-center">主菜</h5>
							<form class="text-center border border-light p-5" action="/pages/addP" method="POST" name="FileForm" enctype="multipart/form-data">

								<!-- Image -->
								<div class="mb-4">
								 <img class="preview" style="max-width: 300px; max-height: 300px;"><br>
								 <div class="size"></div>
								 	</div>
								<div class="custom-file mb-4">
								
									<input type="file" name="file" class="custom-file-input upl"
										id="customFile1"> <label class="custom-file-label"
										for="customFile">圖片</label>	
								</div>
							
								<!-- Name -->
								<input type="text" name="pname" id="name"
									class="form-control mb-4" placeholder="產品名稱">
								<!-- Price -->
								<input type="text" name="price" id="price"
									class="form-control mb-4" placeholder="產品價格">
									
								<!-- quantity -->
								<input type="text" name="quantity" id="quantity"
									class="form-control mb-4" placeholder="產品數量">
								
								<!-- Special -->
								<div class="col-3 mr-auto" style="padding-right:36px;">	
								<input type="radio" id="1" name="special" value="一般" checked="checked">
								<label for="html">一般</label>   
								<input type="radio"id="2" name="special" value="素食">   
								<label for="css">素食</label>   
								<input type="radio"id="3" name="special" value="辣椒">
								<label for="javascript">辣椒</label>
								</div><br>	
								<!-- Description -->
								<textarea class="form-control mb-4" id="desc" name="desc"
									placeholder="Product Description">產品資訊
                                 </textarea>
								

								<!-- Sign in button -->
								<button class="btn btn-info btn-block" onclick="checkFile()"  type="submit" name="prodaction" value="Insert">新增</button>
							</form>
						</div>

						<div id="product2" class="tabcontent">
						   <h5 class="text-center">義大利麵 / 燉飯</h5>
							<form class="text-center border border-light p-5" action="/pages/addP2" method="POST" name="FileForm" enctype="multipart/form-data">
								
								<!-- Image -->
								<div class="mb-4">
								 <img class="preview" style="max-width: 300px; max-height: 300px;"><br>
								 <div class="size"></div>
								 	</div>
								<div class="custom-file mb-4">
								
									<input type="file" name="file" class="custom-file-input upl"
										id="customFile2"> <label class="custom-file-label"
										for="customFile">圖片</label>	
								</div>
								<!-- Name -->
								<input type="text" name="pname" id="name"
									class="form-control mb-4" placeholder="產品名稱">
								<!-- Price -->
								<input type="text" name="price" id="price"
									class="form-control mb-4" placeholder="產品價格">
								<!-- quantity -->
								<input type="text" name="quantity" id="quantity"
									class="form-control mb-4" placeholder="產品數量">
								
								<!-- Special -->
								<div class="col-3 mr-auto" style="padding-right:36px;">	
								<input type="radio" id="1" name="special" value="一般" checked="checked">
								<label for="html">一般</label>   
								<input type="radio"id="2" name="special" value="素食">   
								<label for="css">素食</label>   
								<input type="radio"id="3" name="special" value="辣椒">
								<label for="javascript">辣椒</label>
								</div><br>	
								<!-- Description -->
								<textarea class="form-control mb-4" id="desc" name="desc"
									placeholder="Product Description">產品資訊
                                 </textarea>
								
								
								
								<!-- Sign in button -->
								<button class="btn btn-info btn-block" onclick="checkFile2()" type="submit">新增</button>
							</form>
						</div>
						
						<div id="product3" class="tabcontent">
						   <h5 class="text-center">pizza</h5>
							<form class="text-center border border-light p-5" action="/pages/addP3" method="POST" name="FileForm" enctype="multipart/form-data">
								<!-- Image -->
								<div class="mb-4">
								 <img class="preview" style="max-width: 300px; max-height: 300px;"><br>
								 <div class="size"></div>
								 	</div>
								<div class="custom-file mb-4">
								
									<input type="file" name="file" class="custom-file-input upl"
										id="customFile1"> <label class="custom-file-label"
										for="customFile">圖片</label>	
								</div>
								<!-- Name -->
								<input type="text" name="pname" id="name"
									class="form-control mb-4" placeholder="產品名稱">
								<!-- Price -->
								<input type="text" name="price" id="price"
									class="form-control mb-4" placeholder="產品價格">
								<!-- quantity -->
								<input type="text" name="quantity" id="quantity"
									class="form-control mb-4" placeholder="產品數量">
								
								<!-- Special -->
								<div class="col-3 mr-auto" style="padding-right:36px;">	
								<input type="radio" id="1" name="special" value="一般" checked="checked">
								<label for="html">一般</label>   
								<input type="radio"id="2" name="special" value="素食">   
								<label for="css">素食</label>   
								<input type="radio"id="3" name="special" value="辣椒">
								<label for="javascript">辣椒</label>
								</div><br>	
								<!-- Description -->
								<textarea class="form-control mb-4" id="desc" name="desc"
									placeholder="Product Description">產品資訊
                                 </textarea>
								
								
								
								<!-- Sign in button -->
								<button class="btn btn-info btn-block" type="submit">新增</button>
							</form>
						</div>
						
						<div id="product4" class="tabcontent">
						   <h5 class="text-center">沙拉 / 濃湯</h5>
							<form class="text-center border border-light p-5" action="/pages/addP4" method="POST" name="FileForm" enctype="multipart/form-data">
								<!-- Image -->
								<div class="mb-4">
								 <img class="preview" style="max-width: 300px; max-height: 300px;"><br>
								 <div class="size"></div>
								 	</div>
								<div class="custom-file mb-4">
								
									<input type="file" name="file" class="custom-file-input upl"
										id="customFile1"> <label class="custom-file-label"
										for="customFile">圖片</label>	
								</div>
								<!-- Name -->
								<input type="text" name="pname" id="name"
									class="form-control mb-4" placeholder="產品名稱">
								<!-- Price -->
								<input type="text" name="price" id="price"
									class="form-control mb-4" placeholder="產品價格">
								<!-- quantity -->
								<input type="text" name="quantity" id="quantity"
									class="form-control mb-4" placeholder="產品數量">
								
								<!-- Special -->
								<div class="col-3 mr-auto" style="padding-right:36px;">	
								<input type="radio" id="1" name="special" value="一般" checked="checked">
								<label for="html">一般</label>   
								<input type="radio"id="2" name="special" value="素食">   
								<label for="css">素食</label>   
								<input type="radio"id="3" name="special" value="辣椒">
								<label for="javascript">辣椒</label>
								</div><br>	
								<!-- Description -->
								<textarea class="form-control mb-4" id="desc" name="desc"
									placeholder="Product Description">產品資訊
                                 </textarea>
								
								
								
								<!-- Sign in button -->
								<button class="btn btn-info btn-block" type="submit">新增</button>
							</form>
						</div>
						
						<div id="product5" class="tabcontent">
						   <h5 class="text-center">單點</h5>
							<form class="text-center border border-light p-5" action="/pages/addP5" method="POST" name="FileForm" enctype="multipart/form-data">
								<!-- Image -->
								<div class="mb-4">
								 <img class="preview" style="max-width: 300px; max-height: 300px;"><br>
								 <div class="size"></div>
								 	</div>
								<div class="custom-file mb-4">
								
									<input type="file" name="file" class="custom-file-input upl"
										id="customFile1"> <label class="custom-file-label"
										for="customFile">圖片</label>	
								</div>
								<!-- Name -->
								<input type="text" name="pname" id="name"
									class="form-control mb-4" placeholder="產品名稱">
								<!-- Price -->
								<input type="text" name="price" id="price"
									class="form-control mb-4" placeholder="產品價格">
								<!-- quantity -->
								<input type="text" name="quantity" id="quantity"
									class="form-control mb-4" placeholder="產品數量">
								
								<!-- Special -->
								<div class="col-3 mr-auto" style="padding-right:36px;">	
								<input type="radio" id="1" name="special" value="一般" checked="checked">
								<label for="html">一般</label>   
								<input type="radio"id="2" name="special" value="素食">   
								<label for="css">素食</label>   
								<input type="radio"id="3" name="special" value="辣椒">
								<label for="javascript">辣椒</label>
								</div><br>	
								<!-- Description -->
								<textarea class="form-control mb-4" id="desc" name="desc"
									placeholder="Product Description">產品資訊
                                 </textarea>
								
								<!-- Sign in button -->
								<button class="btn btn-info btn-block" type="submit">新增</button>
							</form>
						</div>
						
						
						
						
					</div>
				</div>
				<!-- Default form subscription -->


			</div>
			<div class="line"></div>
		</div>
	</div>
<div class="main"></div>
	<!-- Bootstrap JS & jQuery -->
	<script src="js/jquery-3.1.1.min.js"></script>
    <script
		src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"
		integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ"
		crossorigin="anonymous"></script>
	<script src="js/bootstrap.js"></script>
	<script type="text/javascript" src="js/bootstrap-select.min.js"></script>
	<!-- Popper.JS -->
	<script type="text/javascript" src="font-awesome/js1/fontawesome.js"></script>
	<script type="text/javascript" src="api/ajaxFetch.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			
			$('#sidebarCollapse').on('click', function() {
				$('#sidebar').toggleClass('active');
			});
			
			$(".chosen-select").chosen({
				  no_results_text: "Oops, nothing found!"
				})
			// To style all selects
		  $('select').selectpicker();
		});
	
		
	</script>
	<script type="text/javascript">
		var dropdown = document.getElementsByClassName("dropdown-btn");
		var i;
		 
		for (i = 0; i < dropdown.length; i++) {
			dropdown[i].addEventListener("click", function() {
				this.classList.toggle("active");
				var dropdownContent = this.nextElementSibling;
				if (dropdownContent.style.display === "block") {
					dropdownContent.style.display = "none";
				} else {
					dropdownContent.style.display = "block";
				}
			});
		}
		
	</script>
	
	<script>
		function openTab(evt, Name) {
			var i, tabcontent, tablinks;
			tabcontent = document.getElementsByClassName("tabcontent");
			for (i = 0; i < tabcontent.length; i++) {
				tabcontent[i].style.display = "none";
			}
			tablinks = document.getElementsByClassName("tablinks");
			for (i = 0; i < tablinks.length; i++) {
				tablinks[i].className = tablinks[i].className.replace(
						" active", "");
			}
			document.getElementById(Name).style.display = "block";
			evt.currentTarget.className += " active";
		}

		// Get the element with id="defaultOpen" and click on it
		document.getElementById("defaultOpen").click();
	</script>

	<script type="text/javascript">
	$(function (){
		 //圖檔預覽
	    function format_float(num, pos)
	    {
	        var size = Math.pow(10, pos);
	        return Math.round(num * size) / size;
	    }
	 
	    function preview(input) {
	 
	        if (input.files && input.files[0]) {
	            var reader = new FileReader();
	            
	            reader.onload = function (e) {
	                $('.preview').attr('src', e.target.result);
	                var KB = format_float(e.total / 1024, 2);
	                $('.size').text("檔案大小：" + KB + " KB");         
	            }
	 
	            reader.readAsDataURL(input.files[0]);
	        }
	    }
	 
	    $("body").on("change", ".upl", function (){
	        preview(this);
	    })
	    
	})
	</script>
	
<script language="JavaScript" type="text/javascript">
		var fileSize = g.size; //檔案大小
		var SizeLimit = 1024;  //上傳上限，單位:byte
		
		function checkFile() {
			
			var f = document.getElementById("customFile1");
			var g = document.getElementById("customFile1").files[0];
			var fileSize = g.size; //檔案大小
			

        //FOR IE
     
            var img = new Image();
            img.onload = checkSize;
            img.src = f.value;
          
               if (img.src != 'http://localhost:8080/') {
 				
            	if(fileSize > 1024000){	
            	alert("圖片檔案超過 1024KB 無法新增!");	
            	checkSize();
            	
 				}
       		 }
            
    }

function checkFile2() {
			var f2 = document.getElementById("customFile2");
			var g2 = document.getElementById("customFile2").files[0];
			var fileSize2 = g2.size; //檔案大小

        //FOR IE
     
            var img = new Image();
            img.onload = checkSize;
            img.src2 = f2.value;

               if (img.src2 != 'http://localhost:8080/') {
    				
               	if(fileSize2 > 1024000){
    				
               	alert("圖片檔案超過 1024KB 無法新增!");
               	checkSize();
               	
    				}
          		 }
    }
    //檢查檔案大小
    function checkSize() {
        //FOR IE FIX
  
        if (fileSize <= SizeLimit) {
            fileSize = this.fileSize;
        }

        if (fileSize > SizeLimit) {
            Message((fileSize / 1024).toPrecision(4), (SizeLimit / 1024).toPrecision(2));
        } else {
            document.FileForm.submit();
        }
    }

    function Message(file, limit) {
        var msg = "您所選擇的檔案大小為 " + file + " kB\n已超過上傳上限 " + limit + " kB\n不允許上傳！"
        alert(msg);
    } 
    $("body").on("change", ".upl", function (){
    	checkFile(this);
    })
</script>
</body>
</html>